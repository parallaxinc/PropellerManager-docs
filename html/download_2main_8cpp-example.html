---
layout: doc
title: PropellerManager - download/main.cpp
doctitle: PropellerManager
doctagline: An event-driven C++ API for Propeller devices
docurl: /projects/propellermanager/
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
                    <div style="margin-bottom: 15px;">
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">download/main.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example downloads a <a class="el" href="namespace_propeller.html">Propeller</a> image to the first availabe device.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QFile&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;PropellerManager&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;PropellerLoader&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;PropellerImage&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    QCoreApplication app(argc, argv);</div>
<div class="line">    <a name="_a0"></a><a class="code" href="class_propeller_manager.html">PropellerManager</a> manager;</div>
<div class="line"></div>
<div class="line">    QStringList devices = manager.<a name="a1"></a><a class="code" href="class_propeller_manager.html#a5224b7c35e4dfcb8968735f3baa8599e">listPorts</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (devices.isEmpty())</div>
<div class="line">    {</div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;No device available for download!&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a name="_a2"></a><a class="code" href="class_propeller_loader.html">PropellerLoader</a> loader(&amp;manager, devices[0]);</div>
<div class="line"></div>
<div class="line">    QFile file(<span class="stringliteral">&quot;../../test/images/ls/ImAlive.binary&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (!file.open(QIODevice::ReadOnly))</div>
<div class="line">    {</div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Couldn&#39;t open file&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a name="_a3"></a><a class="code" href="class_propeller_image.html">PropellerImage</a> image = <a class="code" href="class_propeller_image.html">PropellerImage</a>(file.readAll());</div>
<div class="line">    <span class="keywordflow">if</span> (!loader.<a name="a4"></a><a class="code" href="class_propeller_loader.html#a9ffc3a12ff9669fde0dfe35653fbbfe4">upload</a>(image));</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div>
</div>
